@import 'tailwindcss';

@theme {
  /* Government Parody Colors */
  --color-navy-50: #eef3fa;
  --color-navy-100: #dce7f5;
  --color-navy-200: #c2d3e8;
  --color-navy-300: #98b3d3;
  --color-navy-900: #0a1628;
  --color-navy-800: #121f36;
  --color-navy-700: #1a2d4d;
  --color-navy-600: #2d5986;
  --color-navy-500: #3a6fa0;
  --color-navy-400: #5a8fbf;
  --color-navy-950: #060f1e;

  --color-gold-50: #fdf9ef;
  --color-gold-800: #6d562a;
  --color-gold-700: #8a6e36;
  --color-gold-600: #a88b4a;
  --color-gold-500: #c5a572;
  --color-gold-400: #d4bb8a;
  --color-gold-300: #e8d5b0;
  --color-gold-200: #f0e4ca;
  --color-gold-100: #f7efe0;

  --color-cream-50: #fefcf7;
  --color-cream-500: #b4a894;
  --color-cream-400: #cfc4b2;
  --color-cream-100: #faf7f0;
  --color-cream-200: #f0ebe0;
  --color-cream-300: #e0d8c8;

  --color-parchment: #f5f0e1;

  --color-red-800: #6b1111;
  --color-red-700: #8b1a1a;
  --color-red-600: #a52020;
  --color-red-500: #c02828;

  --color-green-700: #1a6b3a;
  --color-green-600: #228b4a;

  --color-yellow-500: #eab308;

  --color-orange-50: #fff7ed;
  --color-orange-100: #ffedd5;
  --color-orange-200: #fed7aa;
  --color-orange-300: #fdba74;
  --color-orange-400: #fb923c;
  --color-orange-500: #f97316;
  --color-orange-600: #ea580c;
  --color-orange-700: #c2410c;
  --color-orange-800: #9a3412;

  /* Typography */
  --font-serif: 'Libre Caslon Text', 'Georgia', 'Times New Roman', serif;
  --font-sans: 'Inter', 'system-ui', '-apple-system', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;

  /* Spacing for ornamental elements */
  --spacing-ornament: 2rem;
}

/* Layout stacking coordination — each component publishes its own height,
   CSS calc() derives the composite offsets automatically. */
:root {
  --layout-header-h: 0px;
  --layout-fund-bar-h: 0px;
  --layout-subnav-h: 0px;
  --layout-sticky-top: calc(var(--layout-header-h) + var(--layout-fund-bar-h));
  --layout-content-top: calc(var(--layout-header-h) + var(--layout-fund-bar-h) + var(--layout-subnav-h));
}

/* Base styles */
html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-sans);
  background-color: var(--color-cream-100);
  color: var(--color-navy-900);
  line-height: 1.6;
}

/* Mermaid diagrams */
.mermaid-diagram {
  margin: 0;
  border: 1px solid #d2deec;
  border-radius: 10px;
  background: #f9fcff;
  padding: 8px;
  overflow-x: auto;
}

.mermaid-diagram svg {
  display: block;
  width: 100%;
  height: auto;
  border: none;
  border-radius: 0;
  background: transparent;
}

.mermaid-diagram svg .label img,
.mermaid-diagram svg img,
.diagram-inspector-overlay .mermaid-diagram svg .label img,
.diagram-inspector-overlay .mermaid-diagram svg img {
  width: 24px !important;
  height: 24px !important;
  max-width: 24px !important;
  max-height: 24px !important;
  object-fit: contain;
  display: block !important;
  margin: 0 auto 4px !important;
  padding: 4px;
  background: rgba(197, 165, 114, 0.12);
  border: 1.5px solid rgba(197, 165, 114, 0.4);
  border-radius: 6px;
}

/* Mermaid diagram inspector (fullscreen + pan/zoom) */
.mermaid-diagram.diagram-has-overlay {
  position: relative;
}

.diagram-fullscreen-trigger {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  z-index: 5;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.35rem 0.6rem;
  font-family: var(--font-sans);
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 0.02em;
  border-radius: 0.5rem;
  border: 1px solid var(--color-navy-200);
  background: linear-gradient(180deg, #fcfaf2, #f6f0df);
  color: var(--color-navy-800);
  backdrop-filter: blur(6px);
  cursor: pointer;
  box-shadow: 0 8px 18px rgba(5, 20, 45, 0.18);
}

.diagram-fullscreen-trigger:hover {
  border-color: var(--color-gold-500);
  color: var(--color-navy-900);
  box-shadow: 0 10px 24px rgba(10, 22, 40, 0.2);
}

@keyframes diagram-inspector-overlay-fade {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes diagram-inspector-dialog-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.diagram-inspector-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: none;
  background: radial-gradient(1200px 600px at 65% -10%, rgba(255, 255, 255, 0.14), transparent),
    rgba(7, 17, 35, 0.82);
  width: 100dvw;
  height: 100dvh;
  align-items: stretch;
  justify-content: stretch;
}

.diagram-inspector-overlay[data-open='true'] {
  display: flex;
  animation: diagram-inspector-overlay-fade 160ms ease;
}

.diagram-inspector {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  background: linear-gradient(180deg, #fbf8ef 0%, #f3ecdf 120px);
  border: 1px solid rgba(194, 211, 232, 0.6);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.55);
  animation: diagram-inspector-dialog-enter 180ms cubic-bezier(0.16, 1, 0.3, 1);
  overflow: hidden;
}

@media (min-width: 768px) {
  .diagram-inspector {
    border-radius: 0;
  }
}

.diagram-inspector-header {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  padding: 0.7rem 0.85rem;
  border-bottom: 1px solid var(--color-navy-200);
  background: linear-gradient(180deg, rgba(254, 252, 247, 0.98), rgba(252, 248, 237, 0.88));
  backdrop-filter: blur(10px);
}

.diagram-inspector-title-row {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
}

.diagram-inspector-title-wrap {
  min-width: 0;
  flex: 1;
}

.diagram-inspector-title {
  flex: 1;
  font-family: var(--font-sans);
  font-size: 0.95rem;
  font-weight: 700;
  letter-spacing: 0.02em;
  color: var(--color-navy-800);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.diagram-inspector-meta {
  font-family: var(--font-sans);
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 0.02em;
  color: var(--color-navy-700);
  margin-top: 0.12rem;
}

.diagram-inspector-scale {
  margin-left: auto;
  align-self: center;
  border: 1px solid rgba(10, 22, 40, 0.18);
  color: var(--color-navy-900);
  background: white;
  font-family: var(--font-mono);
  font-size: 0.75rem;
  font-weight: 800;
  border-radius: 999px;
  padding: 0.2rem 0.55rem;
  white-space: nowrap;
  line-height: 1.35;
}

.diagram-inspector-status-row {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  align-items: center;
}

.diagram-inspector-diagram-info,
.diagram-inspector-nav-path,
.diagram-inspector-focus {
  border: 1px solid rgba(10, 22, 40, 0.14);
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.84);
  padding: 0.2rem 0.55rem;
  font-family: var(--font-sans);
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: var(--color-navy-700);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.diagram-inspector-nav-path {
  flex: 1;
}

.diagram-inspector-live-status {
  font-family: var(--font-sans);
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  min-height: 1rem;
  display: flex;
  align-items: center;
  color: var(--color-navy-700);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.diagram-inspector-controls {
  display: flex;
  align-items: stretch;
  justify-content: space-between;
  gap: 0.55rem;
  flex-wrap: wrap;
}

.diagram-inspector-control-group {
  display: inline-flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.4rem;
  padding: 0.35rem 0.45rem;
  border: 1px solid rgba(10, 22, 40, 0.16);
  border-radius: 0.65rem;
  background: rgba(255, 255, 255, 0.66);
}

.diagram-inspector-search {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.diagram-inspector-search-input {
  appearance: none;
  border: 1px solid var(--color-navy-200);
  background: white;
  color: var(--color-navy-900);
  font-family: var(--font-mono);
  font-size: 0.75rem;
  font-weight: 700;
  padding: 0.35rem 0.6rem;
  border-radius: 0.55rem;
  width: min(18rem, 45vw);
  max-width: 100%;
}

.diagram-inspector-search-input:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.diagram-inspector-search-input:focus {
  outline: none;
  border-color: var(--color-gold-500);
  box-shadow: 0 0 0 3px rgba(197, 165, 114, 0.25);
}

.diagram-inspector-search-invalid {
  border-color: var(--color-red-500) !important;
  background: rgba(192, 40, 40, 0.06) !important;
}

.diagram-inspector-hints {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding-top: 0.25rem;
  margin-top: -0.2rem;
  border-top: 1px dashed rgba(10, 22, 40, 0.18);
}

.diagram-inspector-hints span {
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
  font-family: var(--font-sans);
  font-size: 0.66rem;
  letter-spacing: 0.01em;
  color: var(--color-navy-700);
}

.diagram-inspector-hints kbd {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.05rem;
  padding: 0 0.35rem;
  border: 1px solid var(--color-navy-500);
  border-radius: 0.4rem;
  background: rgba(255, 255, 255, 0.85);
  color: var(--color-navy-900);
  font-family: var(--font-mono);
  font-size: 0.62rem;
  line-height: 1.5;
}

.diagram-inspector-btn {
  appearance: none;
  border: 1px solid var(--color-navy-200);
  background: white;
  color: var(--color-navy-800);
  font-family: var(--font-sans);
  font-size: 0.75rem;
  font-weight: 700;
  padding: 0.35rem 0.6rem;
  border-radius: 0.55rem;
  cursor: pointer;
  min-height: 2rem;
  min-width: fit-content;
}

.diagram-inspector-btn:hover {
  border-color: var(--color-gold-500);
  background: var(--color-gold-50);
}

.diagram-inspector-btn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.diagram-inspector-btn:focus-visible,
.diagram-inspector-search-input:focus-visible,
.diagram-inspector-btn-primary:focus-visible {
  outline: 2px solid var(--color-gold-500);
  outline-offset: 2px;
}

.diagram-inspector-btn-primary {
  border-color: var(--color-navy-800);
  background: linear-gradient(180deg, #1a3152, #12243e);
  color: var(--color-gold-200);
}

.diagram-inspector-btn-primary:hover {
  background: linear-gradient(180deg, #1f3c67, #173053);
}

.diagram-inspector-viewport {
  position: relative;
  flex: 1;
  overflow: hidden;
  background: linear-gradient(180deg, #ffffff, #f4f8ff 40%, #edf5ff);
  touch-action: none;
  cursor: grab;
}

.diagram-inspector-viewport.diagram-inspector-dragging {
  cursor: grabbing;
}

@media (max-width: 840px) {
  .diagram-inspector-title-row {
    flex-direction: column;
    align-items: stretch;
  }

  .diagram-inspector-scale {
    align-self: flex-end;
    margin-left: 0;
  }

  .diagram-inspector-status-row {
    display: flex;
    flex-wrap: nowrap;
    overflow: hidden;
  }

  .diagram-inspector-nav-path,
  .diagram-inspector-diagram-info,
  .diagram-inspector-focus {
    font-size: 0.62rem;
    padding: 0.15rem 0.42rem;
  }

  .diagram-inspector-control-group {
    padding: 0.28rem 0.38rem;
    width: 100%;
  }

  .diagram-inspector-controls {
    gap: 0.4rem;
  }

  .diagram-inspector-search {
    width: 100%;
  }

  .diagram-inspector-search-input {
    width: min(18rem, 100%);
  }
}

/* Hide per-diagram overlay controls when the diagram is in the fullscreen inspector */
.diagram-inspector-overlay .diagram-fullscreen-trigger {
  display: none;
}

.poc-imac-viewer {
  position: relative;
  margin: 0;
}

.poc-imac-screen {
  position: relative;
  min-width: 0;
  min-height: 0;
}

.poc-imac-frame-svg {
  display: none;
}

.diagram-inspector-overlay .mermaid-diagram {
  margin: 0 !important;
  width: 100%;
  height: 100%;
  overflow: visible !important;
}

.diagram-inspector-overlay .mermaid-diagram svg {
  max-width: none !important;
  max-height: none !important;
}

/* Icon badge rules consolidated above — single combined selector covers both
   .board-canvas and .diagram-inspector-overlay contexts. */

/* Mermaid focus mode in inspector: click a node/edge to isolate connections */
.diagram-inspector-overlay .mermaid-diagram svg g.node,
.diagram-inspector-overlay .mermaid-diagram svg path.flowchart-link,
.diagram-inspector-overlay .mermaid-diagram svg g.edgeLabel {
  transition: opacity 120ms ease, filter 120ms ease;
}

.diagram-inspector-overlay .mermaid-diagram svg g.node,
.diagram-inspector-overlay .mermaid-diagram svg path.flowchart-link,
.diagram-inspector-overlay .mermaid-diagram svg g.edgeLabel {
  cursor: pointer;
}

.diagram-inspector-overlay .mermaid-diagram svg .diagram-dim {
  opacity: 0.12;
}

.diagram-inspector-overlay .mermaid-diagram svg g.node.diagram-highlight,
.diagram-inspector-overlay .mermaid-diagram svg g.edgeLabel.diagram-highlight {
  opacity: 1;
}

.diagram-inspector-overlay .mermaid-diagram svg g.node.diagram-selected {
  opacity: 1;
  filter: drop-shadow(0 12px 26px rgba(10, 22, 40, 0.18)) drop-shadow(0 0 0 rgba(0, 0, 0, 0));
}

.diagram-inspector-overlay .mermaid-diagram svg g.node.diagram-selected rect,
.diagram-inspector-overlay .mermaid-diagram svg g.node.diagram-selected polygon,
.diagram-inspector-overlay .mermaid-diagram svg g.node.diagram-selected path,
.diagram-inspector-overlay .mermaid-diagram svg g.node.diagram-selected ellipse,
.diagram-inspector-overlay .mermaid-diagram svg g.node.diagram-selected circle {
  stroke: var(--color-gold-600) !important;
  stroke-width: 3px !important;
}

.diagram-inspector-overlay .mermaid-diagram svg path.flowchart-link.diagram-highlight {
  opacity: 1;
  stroke: var(--color-gold-600) !important;
  stroke-width: 4px !important;
}

.diagram-inspector-overlay .mermaid-diagram svg path.flowchart-link.diagram-selected {
  opacity: 1;
  stroke: var(--color-gold-700) !important;
  stroke-width: 5px !important;
}

/* Official document styling for MDX bill content */
.bill-content {
  font-family: var(--font-serif);
  font-size: 1.05rem;
  line-height: 1.8;
  color: var(--color-navy-900);
}

.bill-content h2 {
  font-family: var(--font-serif);
  font-size: 1.25rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-top: 2rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--color-gold-300);
}

.bill-content h3 {
  font-family: var(--font-serif);
  font-size: 1.1rem;
  font-weight: 700;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.bill-content h4 {
  font-family: var(--font-serif);
  font-size: 1rem;
  font-weight: 700;
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
}

.bill-content p {
  margin-bottom: 1rem;
  text-align: justify;
}

.bill-content ul,
.bill-content ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.bill-content ul {
  list-style-type: disc;
}

.bill-content ol {
  list-style-type: decimal;
}

.bill-content li {
  margin-bottom: 0.5rem;
}

.bill-content blockquote {
  border-left: 3px solid var(--color-gold-500);
  padding-left: 1.5rem;
  margin: 1.5rem 0;
  font-style: italic;
  color: var(--color-navy-700);
}

/* Tables in bill/PRD content */
.bill-content .table-wrapper {
  overflow-x: auto;
  margin: 1.5rem 0;
  -webkit-overflow-scrolling: touch;
}

.bill-content table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem;
  margin: 1.5rem 0;
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

@media (min-width: 768px) {
  .bill-content table {
    display: table;
    overflow-x: visible;
  }
}

.bill-content th {
  background-color: var(--color-navy-800);
  color: var(--color-cream-100);
  font-weight: 700;
  text-align: left;
  padding: 0.75rem 1rem;
  font-family: var(--font-sans);
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.bill-content td {
  padding: 0.625rem 1rem;
  border-bottom: 1px solid var(--color-gold-300);
  vertical-align: top;
}

.bill-content tbody tr:nth-child(even) {
  background-color: var(--color-cream-200);
}

.bill-content tbody tr:hover {
  background-color: var(--color-gold-100);
}

/* Code blocks in bill/PRD content */
.bill-content pre {
  background-color: var(--color-navy-800);
  color: var(--color-cream-100);
  padding: 1rem 1.25rem;
  border-radius: 0.375rem;
  overflow-x: auto;
  margin: 1.5rem 0;
  font-family: var(--font-mono);
  font-size: 0.875rem;
  line-height: 1.6;
}

.bill-content code {
  font-family: var(--font-mono);
  font-size: 0.875em;
  background-color: var(--color-cream-300);
  padding: 0.15em 0.35em;
  border-radius: 0.25rem;
}

.bill-content pre code {
  background-color: transparent;
  padding: 0;
  font-size: inherit;
}

/* Horizontal rules in bill/PRD content */
.bill-content hr {
  border: none;
  height: 2px;
  background: linear-gradient(
    to right,
    transparent,
    var(--color-gold-500) 20%,
    var(--color-gold-500) 80%,
    transparent
  );
  margin: 2.5rem 0;
}

/* VoteChain four-question cards */
.votechain-question-card {
  background-color: var(--color-cream-50);
}

html.dark .votechain-question-card {
  background-color: #17243c;
}

html[data-theme='solarized-dark'] .votechain-question-card {
  background-color: #0f4351;
}

/* Suppress drop cap on PRD-style content (not a bill) */
.bill-content.prd-content > p:first-of-type::first-letter {
  font-size: inherit;
  float: none;
  line-height: inherit;
  padding: 0;
  font-weight: inherit;
  color: inherit;
}

/* H1 inside bill-content (PRD has a top-level title) */
.bill-content h1 {
  font-family: var(--font-serif);
  font-size: 1.5rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-top: 0;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid var(--color-gold-500);
}

/* Inline links in bill/PRD content */
.bill-content a {
  color: var(--color-navy-600);
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: color 0.2s;
}

.bill-content a:hover {
  color: var(--color-gold-600);
}

/* Drop cap for first paragraph of bill text */
.bill-content > p:first-of-type::first-letter {
  font-family: var(--font-serif);
  font-size: 3.5em;
  float: left;
  line-height: 0.8;
  padding-right: 0.1em;
  padding-top: 0.05em;
  color: var(--color-navy-700);
  font-weight: 700;
}

/* Ornamental gold rule */
.gold-rule {
  border: none;
  height: 2px;
  background: linear-gradient(
    to right,
    transparent,
    var(--color-gold-500) 20%,
    var(--color-gold-500) 80%,
    transparent
  );
  margin: 1.5rem 0;
}

/* Rubber stamp overlay */
.stamp-overlay {
  position: absolute;
  transform: rotate(-12deg);
  opacity: 0.15;
  font-family: var(--font-serif);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  border: 4px solid currentColor;
  border-radius: 8px;
  padding: 0.5rem 1.5rem;
  pointer-events: none;
}

/* Ticker animation */
@keyframes ticker-scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.ticker-animate {
  animation: ticker-scroll 30s linear infinite;
}

/* Session badge pulse */
@keyframes subtle-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.pulse-subtle {
  animation: subtle-pulse 3s ease-in-out infinite;
}

/* Dark mode overrides - comprehensive theme swap */
html.dark {
  /* Background colors - invert light to dark */
  --color-cream-50: #070f1b;
  --color-cream-100: #0a1220;
  --color-cream-200: #0d1626;
  --color-cream-300: #121c30;
  --color-cream-400: #17243c;
  --color-cream-500: #1d2c48;
  --color-parchment: #0f1a2e;

  /* Text colors - navy becomes light for readability */
  --color-navy-50: #46423d;
  --color-navy-100: #59564f;
  --color-navy-200: #716d66;
  --color-navy-300: #89857d;
  --color-navy-900: #f5f0e8;
  --color-navy-800: #ede9e1;
  --color-navy-700: #e0dcd5;
  --color-navy-600: #d4d0c8;
  --color-navy-500: #bdb9b1;
  --color-navy-400: #a09c94;
  --color-navy-950: #060f1e;

  /* Gold stays warm but slightly brighter for dark bg */
  --color-gold-50: #fffdf5;
  --color-gold-800: #946a2a;
  --color-gold-700: #b98436;
  --color-gold-600: #d4a04a;
  --color-gold-500: #e8b85a;
  --color-gold-400: #f0c86a;
  --color-gold-300: #f8d87a;
  --color-gold-200: #fff0c0;
  --color-gold-100: #fff8e8;

  /* Keep red/green/orange semantic colors readable */
  --color-red-700: #ef4444;
  --color-red-600: #f87171;
  --color-green-700: #22c55e;
  --color-green-600: #4ade80;
  --color-orange-50: #2a1a0a;
  --color-orange-100: #3d2410;
  --color-orange-200: #5c3516;
  --color-orange-300: #8a4f1c;
  --color-orange-400: #c06a22;
  --color-orange-500: #f97316;
  --color-orange-600: #fb923c;
  --color-orange-700: #fdba74;
  --color-orange-800: #fed7aa;
}

/* Dark mode class-based overrides for common patterns */
html.dark body {
  background-color: #0a1220;
  color: #f5f0e8;
}

html.dark .bg-parchment {
  background-color: #0f1a2e;
}

html.dark .bg-cream-100 {
  background-color: #0a1220;
}

html.dark .bg-cream-200 {
  background-color: #0d1626;
}

/* Dark mode for cards and containers */
html.dark .bg-white {
  background-color: #0f1a2e;
}

/* Dark mode borders */
html.dark .border-gold-300 {
  border-color: #c5a572;
}

html.dark .border-gold-200 {
  border-color: #a88b4a;
}

/* Dark mode for bill content */
html.dark .bill-content {
  color: #ede9e1;
}

html.dark .bill-content h2 {
  border-bottom-color: #c5a572;
}

html.dark .bill-content blockquote {
  border-left-color: #c5a572;
  color: #d4d0c8;
}

/* Dark mode for CTA buttons — bg-navy-800 flips to cream, text-gold-300 becomes dark gold = no contrast */
html.dark a.bg-navy-800,
html.dark button.bg-navy-800 {
  background-color: #121f36;
  border-color: #1a2d4d;
  color: #f0c86a;
}

html.dark a.bg-navy-800:hover,
html.dark button.bg-navy-800:hover,
html.dark a.bg-navy-700:hover,
html.dark button.bg-navy-700:hover {
  background-color: #1a2d4d;
}

html[data-theme='solarized-dark'] a.bg-navy-800,
html[data-theme='solarized-dark'] button.bg-navy-800 {
  background-color: #073642;
  border-color: #586e75;
  color: #dba800;
}

html[data-theme='solarized-dark'] a.bg-navy-800:hover,
html[data-theme='solarized-dark'] button.bg-navy-800:hover {
  background-color: #0a3d49;
}

/* Dark mode for inputs and forms */
html.dark input,
html.dark textarea,
html.dark select {
  background-color: #121c30;
  border-color: #2d3748;
  color: #f5f0e8;
}

html.dark input::placeholder,
html.dark textarea::placeholder {
  color: #6b7280;
}

/* Dark mode for code blocks */
html.dark code {
  background-color: #1a2744;
  color: #e8b85a;
}

/* Dark mode for tables */
html.dark table {
  border-color: #2d3748;
}

html.dark th {
  background-color: #121c30;
  color: #f5f0e8;
}

html.dark td {
  border-color: #2d3748;
}

html.dark tr:hover {
  background-color: #0f1a2e;
}

/* ==============================
   SOLARIZED DARK THEME
   Solarized base03/base02 palette mapped to existing variable names.
   html.dark class is also set, so existing :global(html.dark) rules
   in components still fire — these overrides layer on top.
   ============================== */
html[data-theme='solarized-dark'] {
  /* Backgrounds — Solarized base03/base02 with stepped surfaces */
  --color-cream-50: #001f27;
  --color-cream-100: #002b36;
  --color-cream-200: #073642;
  --color-cream-300: #0f4351;
  --color-cream-400: #1f535f;
  --color-cream-500: #2b626d;
  --color-parchment: #073642;

  /* Text — Solarized base tones */
  --color-navy-50: #324a52;
  --color-navy-100: #3f5962;
  --color-navy-200: #586e75;
  --color-navy-300: #657b83;
  --color-navy-900: #eee8d5;
  --color-navy-800: #dcd6c4;
  --color-navy-700: #c9c3b3;
  --color-navy-600: #b8b29f;
  --color-navy-500: #93a1a1;
  --color-navy-400: #839496;
  --color-navy-950: #001a22;

  /* Gold — Solarized yellow ramp */
  --color-gold-50: #fef8e6;
  --color-gold-800: #665000;
  --color-gold-700: #806300;
  --color-gold-600: #9a7800;
  --color-gold-500: #b58900;
  --color-gold-400: #cfa530;
  --color-gold-300: #ddbe63;
  --color-gold-200: #eadaa5;
  --color-gold-100: #f5eac8;

  /* Semantic colors — Solarized red/green/orange */
  --color-red-700: #dc322f;
  --color-red-600: #e1645e;
  --color-green-700: #859900;
  --color-green-600: #9cb312;
  --color-orange-50: #1a1508;
  --color-orange-100: #2d2310;
  --color-orange-200: #4d3a18;
  --color-orange-300: #7a5c22;
  --color-orange-400: #b5832e;
  --color-orange-500: #cb4b16;
  --color-orange-600: #e06030;
  --color-orange-700: #f0965a;
  --color-orange-800: #f8c090;
}

html[data-theme='solarized-dark'] body {
  background-color: #002b36;
  color: #eee8d5;
}

html[data-theme='solarized-dark'] .bg-white {
  background-color: #073642;
}

html[data-theme='solarized-dark'] .bg-parchment {
  background-color: #073642;
}

html[data-theme='solarized-dark'] code {
  background-color: #0a3d49;
  color: #cb9b00;
}

html[data-theme='solarized-dark'] input,
html[data-theme='solarized-dark'] textarea,
html[data-theme='solarized-dark'] select {
  background-color: #073642;
  border-color: #586e75;
  color: #eee8d5;
}

html[data-theme='solarized-dark'] table {
  border-color: #586e75;
}

html[data-theme='solarized-dark'] th {
  background-color: #073642;
  color: #eee8d5;
}

html[data-theme='solarized-dark'] td {
  border-color: #586e75;
}

html[data-theme='solarized-dark'] tr:hover {
  background-color: #073642;
}

/* ==============================
   SOLARIZED LIGHT THEME
   Solarized base3/base2 palette with warm cream tones.
   No html.dark class — light theme variant.
   ============================== */
html[data-theme='solarized-light'] {
  /* Backgrounds — Solarized base3, base2 */
  --color-cream-50: #fefdf8;
  --color-cream-100: #fdf6e3;
  --color-cream-200: #eee8d5;
  --color-cream-300: #ddd6c3;
  --color-cream-400: #cfc7b3;
  --color-cream-500: #b8b19d;
  --color-parchment: #eee8d5;

  /* Text — Solarized base00, base01, base02, base03 */
  --color-navy-50: #dfe5e5;
  --color-navy-100: #ced6d6;
  --color-navy-200: #bcc7c7;
  --color-navy-300: #aab7b8;
  --color-navy-900: #002b36;
  --color-navy-800: #073642;
  --color-navy-700: #586e75;
  --color-navy-600: #657b83;
  --color-navy-500: #839496;
  --color-navy-400: #93a1a1;
  --color-navy-950: #001f27;

  /* Gold — Solarized yellow ramp */
  --color-gold-50: #fff7e2;
  --color-gold-800: #665000;
  --color-gold-700: #806300;
  --color-gold-600: #9a7800;
  --color-gold-500: #b58900;
  --color-gold-400: #c49500;
  --color-gold-300: #d4a820;
  --color-gold-200: #e7d69d;
  --color-gold-100: #f5eac8;

  /* Semantic colors */
  --color-red-700: #cb4b16;
  --color-red-600: #dc322f;
  --color-green-700: #859900;
  --color-green-600: #9cb312;
}

/* ==============================
   STRUCTURAL DARK PINS
   The variable-swap approach flips navy→light for text readability,
   but header, footer, hero, ticker, mobile-menu, and settings dial
   must keep dark backgrounds. Reset the variables within those
   elements so every Tailwind utility inside them resolves correctly.
   ============================== */
html.dark [data-theme-fixed],
html.dark #mobile-menu-backdrop,
html.dark #mobile-menu-panel,
html.dark .settings-dial-panel,
html.dark .settings-dial-fab {
  --color-navy-50: #eef3fa;
  --color-navy-100: #dce7f5;
  --color-navy-200: #c2d3e8;
  --color-navy-300: #98b3d3;
  --color-navy-900: #0a1628;
  --color-navy-800: #121f36;
  --color-navy-700: #1a2d4d;
  --color-navy-600: #2d5986;
  --color-navy-500: #3a6fa0;
  --color-navy-400: #5a8fbf;
  --color-navy-950: #060f1e;
  --color-cream-50: #fefcf7;
  --color-cream-100: #faf7f0;
  --color-cream-200: #f0ebe0;
  --color-cream-300: #e0d8c8;
  --color-cream-400: #cfc4b2;
  --color-cream-500: #b4a894;
  --color-gold-50: #fdf9ef;
  --color-gold-100: #f7efe0;
  --color-gold-200: #f0e4ca;
  --color-gold-300: #e8d5b0;
  --color-gold-400: #d4bb8a;
  --color-gold-500: #c5a572;
  --color-gold-600: #a88b4a;
  --color-gold-800: #6d562a;
  --color-gold-700: #8a6e36;
  --color-parchment: #f5f0e1;
}

html[data-theme='solarized-dark'] [data-theme-fixed],
html[data-theme='solarized-dark'] #mobile-menu-backdrop,
html[data-theme='solarized-dark'] #mobile-menu-panel,
html[data-theme='solarized-dark'] .settings-dial-panel,
html[data-theme='solarized-dark'] .settings-dial-fab {
  --color-navy-50: #dfe5e5;
  --color-navy-100: #ced6d6;
  --color-navy-200: #bcc7c7;
  --color-navy-300: #aab7b8;
  --color-navy-900: #002b36;
  --color-navy-800: #073642;
  --color-navy-700: #586e75;
  --color-navy-600: #657b83;
  --color-navy-500: #839496;
  --color-navy-400: #93a1a1;
  --color-navy-950: #001f27;
  --color-cream-50: #fefdf8;
  --color-cream-100: #fdf6e3;
  --color-cream-200: #eee8d5;
  --color-cream-300: #ddd6c3;
  --color-cream-400: #cfc7b3;
  --color-cream-500: #b8b19d;
  --color-gold-50: #fff7e2;
  --color-gold-100: #f5eac8;
  --color-gold-200: #e7d69d;
  --color-gold-300: #d4a820;
  --color-gold-400: #c49500;
  --color-gold-500: #b58900;
  --color-gold-600: #9a7800;
  --color-gold-800: #665000;
  --color-gold-700: #806300;
  --color-parchment: #eee8d5;
}

/* Dynamic scope to restore active theme variables inside a fixed theme region. */
html.dark [data-theme-dynamic] {
  --color-cream-50: #070f1b;
  --color-cream-100: #0a1220;
  --color-cream-200: #0d1626;
  --color-cream-300: #121c30;
  --color-cream-400: #17243c;
  --color-cream-500: #1d2c48;
  --color-parchment: #0f1a2e;
  --color-navy-50: #46423d;
  --color-navy-100: #59564f;
  --color-navy-200: #716d66;
  --color-navy-300: #89857d;
  --color-navy-900: #f5f0e8;
  --color-navy-800: #ede9e1;
  --color-navy-700: #e0dcd5;
  --color-navy-600: #d4d0c8;
  --color-navy-500: #bdb9b1;
  --color-navy-400: #a09c94;
  --color-navy-950: #060f1e;
  --color-gold-50: #fffdf5;
  --color-gold-800: #946a2a;
  --color-gold-700: #b98436;
  --color-gold-600: #d4a04a;
  --color-gold-500: #e8b85a;
  --color-gold-400: #f0c86a;
  --color-gold-300: #f8d87a;
  --color-gold-200: #fff0c0;
  --color-gold-100: #fff8e8;
}

html[data-theme='solarized-dark'] [data-theme-dynamic] {
  --color-cream-50: #001f27;
  --color-cream-100: #002b36;
  --color-cream-200: #073642;
  --color-cream-300: #0f4351;
  --color-cream-400: #1f535f;
  --color-cream-500: #2b626d;
  --color-parchment: #073642;
  --color-navy-50: #324a52;
  --color-navy-100: #3f5962;
  --color-navy-200: #586e75;
  --color-navy-300: #657b83;
  --color-navy-900: #eee8d5;
  --color-navy-800: #dcd6c4;
  --color-navy-700: #c9c3b3;
  --color-navy-600: #b8b29f;
  --color-navy-500: #93a1a1;
  --color-navy-400: #839496;
  --color-navy-950: #001a22;
  --color-gold-50: #fef8e6;
  --color-gold-800: #665000;
  --color-gold-700: #806300;
  --color-gold-600: #9a7800;
  --color-gold-500: #b58900;
  --color-gold-400: #cfa530;
  --color-gold-300: #ddbe63;
  --color-gold-200: #eadaa5;
  --color-gold-100: #f5eac8;
}

/* Hide scrollbars while preserving swipe scroll on mobile chip rows */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Print-friendly styles */
@media print {
  @page {
    margin: 2cm;
    @bottom-center {
      content: 'Absurdity Index — absurdityindex.org';
      font-family: 'Libre Caslon Text', Georgia, serif;
      font-size: 9pt;
      color: #666;
    }
  }

  /* Hide non-essential elements */
  header,
  footer,
  nav,
  .construction-banner,
  .share-buttons,
  [data-mobile-menu],
  .mobile-menu,
  .mobile-nav,
  [data-settings-dial] {
    display: none !important;
  }

  /* Base print typography */
  body {
    background: white !important;
    color: black !important;
    font-family: 'Libre Caslon Text', Georgia, 'Times New Roman', serif !important;
    font-size: 12pt;
    line-height: 1.5;
  }

  /* Show URLs after external links */
  a[href^='http']::after {
    content: ' (' attr(href) ')';
    font-size: 0.8em;
    font-weight: normal;
    color: #444;
  }

  /* Full-width bill content */
  .bill-content {
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Remove decorative styles from cards */
  .bg-parchment,
  .bg-cream-100,
  .bg-cream-200,
  .bg-navy-800,
  .bg-navy-900,
  [class*='bg-'] {
    background: white !important;
    box-shadow: none !important;
    border-radius: 0 !important;
  }

  /* Remove box shadows and rounded corners globally */
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  [class*='rounded'] {
    border-radius: 0 !important;
  }

  /* Simplify the absurdity meter for print */
  .absurdity-meter {
    border: 1px solid #333 !important;
    background: white !important;
  }

  /* Ensure text is readable */
  [class*='text-navy'],
  [class*='text-gold'],
  [class*='text-cream'] {
    color: black !important;
  }

  /* Gold rule simplified for print */
  .gold-rule {
    background: #333 !important;
    height: 1px !important;
  }

  /* Stamp overlay lighter for print */
  .stamp-overlay {
    opacity: 0.1 !important;
    color: #666 !important;
  }

  /* Avoid page breaks inside key content */
  .bill-content h2,
  .bill-content h3 {
    page-break-after: avoid;
  }

  .bill-content p,
  .bill-content blockquote {
    orphans: 3;
    widows: 3;
  }

  img,
  svg {
    max-width: 100% !important;
    page-break-inside: avoid;
  }
}

/* Responsive table scroll wrappers — prevent overflow on mobile */
.bill-content table,
.prd-content table {
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  max-width: 100%;
}

/* Back-to-top button */
.back-to-top {
  position: fixed;
  bottom: 5rem;
  right: 1.25rem;
  z-index: 40;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 9999px;
  border: 1px solid var(--color-navy-200);
  background: var(--color-cream-50);
  color: var(--color-navy-700);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s, transform 0.2s;
  transform: translateY(0.5rem);
}

.back-to-top.visible {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

.back-to-top:hover {
  background: var(--color-gold-50);
  border-color: var(--color-gold-400);
  color: var(--color-navy-900);
}

/* ── POC Focus Mode ─────────────────────────────────────────────────
   Activated by html.poc-focus (via ?focus query param or toggle button).
   Hides all layout chrome so the POC content fills the viewport. */
html.poc-focus {
  --layout-header-h: 0px !important;
  --layout-fund-bar-h: 0px !important;
  --layout-subnav-h: 0px !important;
  --layout-sticky-top: 0px !important;
  --layout-content-top: 0px !important;
}

html.poc-focus body { padding-bottom: 0 !important; }

html.poc-focus header,
html.poc-focus [data-votechain-subnav],
html.poc-focus .construction-banner,
html.poc-focus footer,
html.poc-focus [aria-label="Satire disclaimer"],
html.poc-focus .back-to-top,
html.poc-focus .settings-dial-fab,
html.poc-focus #settings-panel,
html.poc-focus #fund-tab,
html.poc-focus #fund-drawer,
html.poc-focus .founding-docs-drawer,
html.poc-focus .absurdity-index-drawer,
html.poc-focus .legislative-glossary-drawer {
  display: none !important;
}

/* Hide the sidebar grid wrapper — just show the slot content full-width */
html.poc-focus .xl\:grid.xl\:grid-cols-\[250px_minmax\(0\,1fr\)\] {
  display: block !important;
}
html.poc-focus .xl\:grid.xl\:grid-cols-\[250px_minmax\(0\,1fr\)\] > aside {
  display: none !important;
}

/* Expand all width-constrained containers to fill the viewport */
html.poc-focus main [class*="max-w-"] {
  max-width: 100% !important;
}

/* Focus mode toggle button */
.poc-focus-toggle {
  position: fixed;
  top: 12px;
  right: 12px;
  z-index: 99999;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 6px;
  border: 1px solid var(--color-navy-200);
  background: var(--color-cream-50);
  color: var(--color-navy-700);
  font-family: var(--font-sans);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s, background 0.2s;
}
.poc-focus-toggle:hover { opacity: 1; background: var(--color-gold-50); }
html.poc-focus .poc-focus-toggle {
  top: 12px;
  background: var(--color-navy-800);
  color: var(--color-cream-50);
  border-color: var(--color-navy-600);
}
html.poc-focus .poc-focus-toggle:hover {
  background: var(--color-navy-700);
}

/* ── POC Focus Mode: Wizard & Compaction ─────────────────────────────
   Additional rules that compact content for viewport-fit wizard layout. */

/* Prevent browser-level scrollbars in focus mode */
html.poc-focus { overflow: hidden; }
html.poc-focus body { overflow: hidden; height: 100vh; height: 100dvh; }
html.poc-focus main {
  overflow-y: auto;
  height: 100vh;
  height: 100dvh;
  min-height: unset !important;
  display: flex;
  flex-direction: column;
}

html.poc-focus main {
  justify-content: center;
  align-items: center;
  padding: 0;
}

html.poc-focus .poc-imac-viewer {
  /*
   * Screen rect extracted from imac-svgrepo-com.svg inner-screen sub-path
   * (after the two nested translates collapse to x-208, y-8).
   * viewBox="0 -8 128 128"  →  1:1 aspect ratio, y shifted by 8.
   */
  --svg: 128;          /* viewBox width & height                      */
  --sy: 8;             /* viewBox y-offset (viewBox starts at y = -8) */
  --sx: 7;             /* screen left   (transformed x)               */
  --st: 7;             /* screen top    (transformed y)                */
  --sw: 114;           /* screen width  (121 − 7)                      */
  --sh: 62;            /* screen height (69 − 7)                       */

  width: min(92vw, 92dvh);          /* square — matches 1:1 SVG        */
  max-width: 1100px;
  aspect-ratio: 1;                  /* lock 1:1 so % map straight to SVG coords */
  position: relative;
  margin: 0 auto;
  overflow: visible;
}

html.poc-focus .poc-imac-frame-svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  pointer-events: none;
  z-index: 3;
}

html.poc-focus .poc-imac-screen {
  position: absolute;
  top:    calc((var(--st) + var(--sy)) / var(--svg) * 100%);
  left:   calc( var(--sx)              / var(--svg) * 100%);
  width:  calc( var(--sw)              / var(--svg) * 100%);
  height: calc( var(--sh)              / var(--svg) * 100%);
  overflow-y: auto;
  overflow-x: hidden;
  pointer-events: auto;
  display: flex;
  flex-direction: column;
  padding: 0.4rem;
  box-sizing: border-box;
  z-index: 2;
  border-radius: 4px;
}

html.poc-focus .poc-imac-screen > .max-w-5xl {
  flex: 1;
  max-width: 100%;
  margin: 0;
  padding: 0;
  width: 100%;
}

html.poc-focus .poc-imac-screen #wizard-controls {
  width: 100%;
  margin: 0;
}

/* Content wrapper fills remaining space below hero */
html.poc-focus main > div[class*="max-w-"] {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* Step containers fill available space */
html.poc-focus [data-poc-step]:not([hidden]) {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* Vote page: wizard step container fills space, controls stick to bottom */
html.poc-focus #wizard-step-container {
  flex: 1;
  display: flex;
  flex-direction: column;
}
html.poc-focus #wizard-step-container > section:not(.hidden) {
  flex: 1;
}

/* Hide verbose supplementary content (shown via detail drawer instead) */
html.poc-focus [data-poc-detail] { display: none !important; }

/* Keep brief step descriptions visible */
html.poc-focus [data-poc-brief] { display: block !important; }

/* Hide JourneyStepBar (wizard nav replaces it) */
html.poc-focus .journey-bar { display: none !important; }

/* Compact hero bars */
html.poc-focus .bg-navy-900.py-3 { padding-top: 0.375rem; padding-bottom: 0.375rem; }
html.poc-focus .bg-navy-900 svg[role="img"][aria-label*="Seal"] { display: none; }
html.poc-focus .bg-navy-900.py-3 p.text-\[10px\] { display: none; }
html.poc-focus .bg-navy-900.py-3 p.hidden.sm\:block { display: none !important; }
html.poc-focus .bg-navy-900.py-3 h1 { font-size: 1rem; line-height: 1.2; }

/* Compact content padding */
html.poc-focus .py-10 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
html.poc-focus .sm\:py-12 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
html.poc-focus .py-6 { padding-top: 0.375rem; padding-bottom: 0.375rem; }
html.poc-focus .sm\:py-8 { padding-top: 0.375rem; padding-bottom: 0.375rem; }
html.poc-focus .space-y-8 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: 0.5rem; }
html.poc-focus .space-y-6 > :not([hidden]) ~ :not([hidden]) { --tw-space-y-reverse: 0; margin-top: 0.375rem; }
html.poc-focus .p-6 { padding: 0.75rem; }
html.poc-focus .sm\:p-8 { padding: 0.75rem; }
html.poc-focus .p-5 { padding: 0.625rem; }
html.poc-focus .sm\:p-6 { padding: 0.625rem; }
html.poc-focus .pb-28 { padding-bottom: 0.5rem; }

/* Compact step indicator on vote page */
html.poc-focus #step-indicator-bar { padding-top: 0.25rem; padding-bottom: 0.25rem; top: 0 !important; }
html.poc-focus .step-circle { width: 1.5rem; height: 1.5rem; font-size: 0.7rem; }
html.poc-focus #step-indicator p { font-size: 8px; margin-top: 0.125rem; }

/* Compact metrics grid on dashboard */
html.poc-focus .grid.grid-cols-2.lg\:grid-cols-5 .p-6 { padding: 0.5rem; }
html.poc-focus .grid.grid-cols-2.lg\:grid-cols-5 .text-3xl { font-size: 1.25rem; }
html.poc-focus .grid.grid-cols-2.lg\:grid-cols-5 .mb-2 { margin-bottom: 0.25rem; }

/* Compact tables */
html.poc-focus table th { padding: 0.25rem 0.5rem; font-size: 0.65rem; }
html.poc-focus table td { padding: 0.25rem 0.5rem; font-size: 0.75rem; }

/* Compact pre/code blocks */
html.poc-focus pre { max-height: 120px; overflow-y: auto; padding: 0.5rem; font-size: 0.7rem; line-height: 1.4; }

/* Compact form elements on setup page */
html.poc-focus .gap-4 { gap: 0.5rem; }
html.poc-focus .gap-3 { gap: 0.375rem; }
html.poc-focus .mb-4 { margin-bottom: 0.375rem; }
html.poc-focus .mb-3 { margin-bottom: 0.25rem; }
html.poc-focus .mt-4 { margin-top: 0.375rem; }
html.poc-focus .mt-3 { margin-top: 0.25rem; }
html.poc-focus .mt-5 { margin-top: 0.375rem; }

/* Compact setup page header */
html.poc-focus header.text-center h1.text-3xl { font-size: 1.25rem; }
html.poc-focus header.text-center p.text-sm { display: none; }
html.poc-focus header.text-center p.text-xs { display: none; }
html.poc-focus .py-8 { padding-top: 0.5rem; padding-bottom: 0.5rem; }

/* Compact verify page textarea */
html.poc-focus #receipt-input { min-height: 100px; font-size: 0.65rem; padding: 0.5rem; }

/* Vote page: tighten wizard controls in focus mode */
html.poc-focus #wizard-controls {
  position: sticky;
  bottom: 0;
  border-radius: 0;
  border-left: 0;
  border-right: 0;
  border-bottom: 0;
  margin: 0 -1rem;
  padding: 0.5rem 1rem;
  width: calc(100% + 2rem);
}

/* Brief descriptions: compact styling */
html.poc-focus [data-poc-brief] {
  font-size: 0.8rem;
  color: var(--color-navy-500);
  margin-bottom: 0.375rem;
  margin-top: 0;
}

/* ── Wizard nav bar ── */
.poc-wizard-nav {
  display: none;
  position: sticky;
  top: 0;
  z-index: 30;
  background: var(--color-navy-800);
  border-bottom: 1px solid var(--color-navy-600);
  padding: 0.375rem 1rem;
  gap: 0.5rem;
  align-items: center;
  justify-content: center;
}

html.poc-focus .poc-wizard-nav {
  display: flex;
}

/* Arrow buttons (prev/next) */
.poc-wizard-arrow {
  appearance: none;
  border: 1px solid var(--color-navy-600);
  background: transparent;
  color: var(--color-gold-300);
  width: 28px;
  height: 28px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.poc-wizard-arrow:hover:not(:disabled) {
  background: var(--color-navy-700);
  border-color: var(--color-gold-500);
  color: var(--color-gold-200);
}

.poc-wizard-arrow:disabled {
  opacity: 0.3;
  cursor: default;
}

/* Pill container */
.poc-wizard-pills {
  display: flex;
  gap: 0.375rem;
  align-items: center;
  flex-wrap: wrap;
}

.poc-wizard-pill {
  appearance: none;
  border: 1px solid var(--color-navy-600);
  background: transparent;
  color: var(--color-gold-300);
  font-family: var(--font-sans);
  font-size: 0.7rem;
  font-weight: 600;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
}

.poc-wizard-pill:hover {
  border-color: var(--color-gold-500);
  background: var(--color-navy-700);
}

.poc-wizard-pill[aria-current="step"] {
  background: var(--color-gold-500);
  color: var(--color-navy-900);
  border-color: var(--color-gold-400);
  font-weight: 700;
}

/* Step counter */
.poc-wizard-counter {
  font-family: var(--font-mono);
  font-size: 0.65rem;
  color: var(--color-gold-400);
  letter-spacing: 0.04em;
  margin-left: 0.5rem;
  white-space: nowrap;
  opacity: 0.8;
}

/* ── Detail drawer ── */
.poc-detail-backdrop {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 9998;
  background: rgba(10, 22, 40, 0.5);
  backdrop-filter: blur(4px);
}

.poc-detail-backdrop.open { display: block; }

.poc-detail-drawer {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  width: min(420px, 85vw);
  background: var(--color-cream-50);
  border-left: 1px solid var(--color-navy-200);
  box-shadow: -4px 0 24px rgba(10, 22, 40, 0.15);
  transform: translateX(100%);
  transition: transform 0.25s ease;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.poc-detail-drawer.open { transform: translateX(0); }

.poc-detail-drawer header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--color-navy-200);
  background: var(--color-cream-100);
  font-family: var(--font-sans);
  font-size: 0.8rem;
  font-weight: 700;
  color: var(--color-navy-800);
}

.poc-detail-drawer-close {
  appearance: none;
  background: none;
  border: 1px solid var(--color-navy-200);
  border-radius: 0.375rem;
  padding: 0.25rem 0.5rem;
  font-family: var(--font-sans);
  font-size: 0.7rem;
  font-weight: 600;
  color: var(--color-navy-700);
  cursor: pointer;
}

.poc-detail-drawer-close:hover {
  border-color: var(--color-gold-500);
  background: var(--color-gold-50);
}

#poc-detail-content {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
}

#poc-detail-content .poc-detail-section {
  margin-bottom: 1.25rem;
}

#poc-detail-content .poc-detail-section-title {
  font-family: var(--font-sans);
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-gold-600);
  margin-bottom: 0.5rem;
  padding-bottom: 0.25rem;
  border-bottom: 1px solid var(--color-gold-300);
}

#poc-detail-content .poc-detail-section-body {
  font-size: 0.8rem;
  line-height: 1.6;
  color: var(--color-navy-700);
}

/* Detail trigger button */
.poc-detail-trigger {
  display: none;
  position: fixed;
  top: 12px;
  right: 120px;
  z-index: 99998;
  appearance: none;
  border: 1px solid var(--color-navy-200);
  background: var(--color-cream-50);
  color: var(--color-navy-700);
  font-family: var(--font-sans);
  font-size: 12px;
  font-weight: 600;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s, background 0.2s;
}

.poc-detail-trigger:hover { opacity: 1; background: var(--color-gold-50); }

html.poc-focus .poc-detail-trigger { display: inline-flex; }
html.poc-focus .poc-detail-trigger {
  background: var(--color-navy-800);
  color: var(--color-cream-50);
  border-color: var(--color-navy-600);
}
html.poc-focus .poc-detail-trigger:hover {
  background: var(--color-navy-700);
}
