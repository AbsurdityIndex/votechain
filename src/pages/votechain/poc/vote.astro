---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Icon from '../../../components/ui/Icon.astro';
import PocHarnessShell from '../../../components/votechain/poc/PocHarnessShell.astro';
import PocVotingClientModal from '../../../components/votechain/poc/PocVotingClientModal.astro';
---

<BaseLayout
  title="VoteChain POC Voting Kiosk"
  description="VoteChain POC harness page for launching the iPad voting client modal and related operator clients."
  ogType="article"
  article={{
    publishedTime: '2026-02-08',
    author: 'Absurdity Index',
    section: 'Policy',
    tags: ['votechain', 'ewp', 'poc', 'receipt verification'],
  }}
>
  <main
    id="poc-vote-main"
    class="bg-parchment min-h-screen pb-10"
    role="main"
    aria-labelledby="poc-vote-title"
  >
    <PocHarnessShell
      current="vote"
      title="Voting Kiosk"
      subtitle="Credential, challenge, encrypt, and cast without leaving the harness"
    />

    <header class="max-w-4xl mx-auto px-4 pt-6">
      <p class="text-xs text-gold-600 font-mono uppercase tracking-widest mb-1">Voting Kiosk</p>
      <h1 id="poc-vote-title" class="font-serif text-3xl text-navy-900 font-bold">
        Launch the iPad kiosk inside the harness
      </h1>
      <p class="text-navy-600 text-sm mt-2 max-w-3xl">
        Launch the kiosk once in a modal shell. The harness stays visible so you can issue credentials,
        respond to challenges, and jump between operator tools without duplicate launchers.
      </p>
    </header>

    <section class="max-w-4xl mx-auto px-4 pt-6">
      <div class="rounded-xl border border-navy-200 bg-white p-6 sm:p-8 shadow-md">
        <div class="flex items-start justify-between gap-4 flex-wrap">
          <div>
            <p class="text-[10px] font-mono uppercase tracking-widest text-navy-500">Active Test Client</p>
            <h2 class="font-serif text-2xl text-navy-900 font-bold mt-1">iPad Voting Kiosk</h2>
            <p class="text-navy-600 text-sm mt-2 max-w-2xl">
              The voting client now runs as an isolated modal component. Harness controls and other mocked clients stay on this page.
              Open it to issue credentials, cast, and complete receipt flow.
            </p>
          </div>
          <button
            type="button"
            data-open-voting-modal
            class="inline-flex items-center gap-2 rounded-md bg-gold-500 px-5 py-3 text-navy-900 font-sans text-sm font-semibold hover:bg-gold-400 transition-colors shadow-sm"
            aria-haspopup="dialog"
            aria-controls="poc-voting-client-modal"
          >
            <Icon name="vote" class="text-navy-900" size={18} />
            Open Voting Kiosk
          </button>
        </div>

        <div class="mt-6 grid grid-cols-1 sm:grid-cols-3 gap-3">
          <button
            type="button"
            class="rounded-lg border border-navy-200 bg-cream-50 p-3 hover:border-gold-400 transition-colors text-left"
            data-open-client-modal
            data-client-key="setup"
            data-client-title="Admin Console"
            data-client-path="/votechain/poc/setup"
            aria-haspopup="dialog"
            aria-controls="poc-voting-client-modal"
          >
            <p class="text-xs font-semibold text-navy-900">Admin Console</p>
            <p class="text-[11px] text-navy-600 mt-1">Configure election, pools, and same-day intake.</p>
          </button>
          <button
            type="button"
            class="rounded-lg border border-navy-200 bg-cream-50 p-3 hover:border-gold-400 transition-colors text-left"
            data-open-client-modal
            data-client-key="verify"
            data-client-title="Receipt Verification"
            data-client-path="/votechain/poc/verify"
            aria-haspopup="dialog"
            aria-controls="poc-voting-client-modal"
          >
            <p class="text-xs font-semibold text-navy-900">Receipt Verification</p>
            <p class="text-[11px] text-navy-600 mt-1">Validate signature, Merkle inclusion, and ledger anchor.</p>
          </button>
          <button
            type="button"
            class="rounded-lg border border-navy-200 bg-cream-50 p-3 hover:border-gold-400 transition-colors text-left"
            data-open-client-modal
            data-client-key="dashboard"
            data-client-title="Reveal & Tally"
            data-client-path="/votechain/poc/dashboard"
            aria-haspopup="dialog"
            aria-controls="poc-voting-client-modal"
          >
            <p class="text-xs font-semibold text-navy-900">Reveal + Tally</p>
            <p class="text-[11px] text-navy-600 mt-1">Publish tally and inspect election-wide controls.</p>
          </button>
        </div>
      </div>
    </section>

    <PocVotingClientModal />
  </main>
</BaseLayout>
