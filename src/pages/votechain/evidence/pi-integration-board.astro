---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Icon from '../../../components/ui/Icon.astro';

---

<BaseLayout
  title="VoteChain Raspberry Pi Integration Board"
  description="Visual wiring and networking board for integrating Raspberry Pi vote machines into VoteChain test benches."
  ogType="article"
  article={{
    publishedTime: '2026-02-12',
    modifiedTime: '2026-02-12',
    author: 'Absurdity Index',
    section: 'Engineering',
    tags: ['votechain', 'evidence', 'diagram board'],
  }}
>
  <div class="max-w-7xl mx-auto px-4 py-8">
    <div class="text-center mb-6">
      <p class="text-xs text-gold-600 font-mono uppercase tracking-widest mb-1">Evidence Board</p>
      <h1 class="font-serif text-2xl md:text-3xl text-navy-900 font-bold">Raspberry Pi Integration Diagram Board</h1>
      <p class="text-navy-600 font-serif italic mt-2 text-sm max-w-3xl mx-auto">Physical wiring, VLAN segmentation, service placement, and session-flow validation.</p>
    </div>

    <div class="rounded-lg border border-gold-300 bg-cream-50 p-5 mb-8">
      <div class="flex items-start gap-3">
        <Icon name="file-check" class="text-gold-700 mt-0.5 flex-shrink-0" />
        <div class="text-navy-800 text-sm space-y-2">
          <p>This board is fully Astro-rendered and linked into the VoteChain integration docs.</p>
          <p>PNG exports are produced from this page route by Playwright via `npm run export:diagrams:pi`.</p>
        </div>
      </div>
    </div>

      <article class="bg-parchment rounded-lg shadow-lg p-0 overflow-x-auto">
        <div class="board-canvas">
          <div class="page">
<section class="hero">
        <p class="kicker">VoteChain Raspberry Pi Test Bench</p>
        <h1>Physical Wiring + Network Integration Map</h1>
        <p>
          Concrete layout for test elections: Raspberry Pi booth machines, switch fabric, VLAN/subnet isolation,
          one-way transfer boundary, and airgap/central reconciliation path.
        </p>
        <div class="metrics">
          <div class="metric"><span>Booth Pis</span><strong>5 x Pi 5</strong></div>
          <div class="metric"><span>Ops Pi</span><strong>1</strong></div>
          <div class="metric"><span>Airgap Pis</span><strong>5</strong></div>
          <div class="metric"><span>Central Hosts</span><strong>5</strong></div>
          <div class="metric"><span>VLANs</span><strong>10/20/30</strong></div>
          <div class="metric"><span>Sessions/Booth</span><strong>100</strong></div>
          <div class="metric"><span>Total Sessions</span><strong>500/run</strong></div>
        </div>
      </section>

      <section class="grid">
        <article class="panel panel-topology" data-panel="pi-lab-topology">
          <p class="label">End-To-End Topology</p>
          <h2>Where Every Raspberry Pi Sits</h2>
          <p>Left to right: polling-place booth Pis, transfer boundary, airgap Pis, central verification hosts.</p>
          <svg viewBox="0 0 1580 760" role="img" aria-label="Raspberry Pi topology with zones and connections">
            <defs>
              <marker id="arrowBlue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#2f6db3" />
              </marker>
              <marker id="arrowGold" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#b9862c" />
              </marker>
            </defs>

            <rect x="20" y="20" width="560" height="720" rx="12" fill="#e9f3ff" stroke="#aac3df" />
            <text x="38" y="52" font-size="16" fill="#1f446d" class="caps">Polling Place Zone (VLAN10 | 10.10.10.0/24)</text>

            <rect x="610" y="20" width="300" height="720" rx="12" fill="#fff4df" stroke="#dbc290" />
            <text x="634" y="52" font-size="16" fill="#6f5116" class="caps">Transfer Boundary</text>

            <rect x="940" y="20" width="620" height="350" rx="12" fill="#ebf8ef" stroke="#a8d8b8" />
            <text x="960" y="52" font-size="16" fill="#246843" class="caps">Airgap Core (VLAN20 | 10.20.0.0/24)</text>

            <rect x="940" y="390" width="620" height="350" rx="12" fill="#eef0ff" stroke="#b4c0f5" />
            <text x="960" y="422" font-size="16" fill="#31449e" class="caps">Central Verify (VLAN30 | 10.30.0.0/24)</text>

            <g transform="translate(48,84)">
              <g>
                <rect x="0" y="0" width="170" height="86" rx="10" fill="#fff" stroke="#9fb7d4" />
                <text x="12" y="24" font-size="14" fill="#0f243e" class="caps">Booth Pi 1</text>
                <text x="12" y="45" font-size="12" fill="#496789">Raspberry Pi 5 + Touch + QR + Printer</text>
                <text x="12" y="63" font-size="11" fill="#496789">10.10.10.11</text>
              </g>
              <g transform="translate(184,0)">
                <rect x="0" y="0" width="170" height="86" rx="10" fill="#fff" stroke="#9fb7d4" />
                <text x="12" y="24" font-size="14" fill="#0f243e" class="caps">Booth Pi 2</text>
                <text x="12" y="45" font-size="12" fill="#496789">Raspberry Pi 5 + Touch + QR + Printer</text>
                <text x="12" y="63" font-size="11" fill="#496789">10.10.10.12</text>
              </g>
              <g transform="translate(0,104)">
                <rect x="0" y="0" width="170" height="86" rx="10" fill="#fff" stroke="#9fb7d4" />
                <text x="12" y="24" font-size="14" fill="#0f243e" class="caps">Booth Pi 3</text>
                <text x="12" y="45" font-size="12" fill="#496789">Raspberry Pi 5 + Touch + QR + Printer</text>
                <text x="12" y="63" font-size="11" fill="#496789">10.10.10.13</text>
              </g>
              <g transform="translate(184,104)">
                <rect x="0" y="0" width="170" height="86" rx="10" fill="#fff" stroke="#9fb7d4" />
                <text x="12" y="24" font-size="14" fill="#0f243e" class="caps">Booth Pi 4</text>
                <text x="12" y="45" font-size="12" fill="#496789">Raspberry Pi 5 + Touch + QR + Printer</text>
                <text x="12" y="63" font-size="11" fill="#496789">10.10.10.14</text>
              </g>
              <g transform="translate(92,208)">
                <rect x="0" y="0" width="170" height="86" rx="10" fill="#fff" stroke="#9fb7d4" />
                <text x="12" y="24" font-size="14" fill="#0f243e" class="caps">Booth Pi 5</text>
                <text x="12" y="45" font-size="12" fill="#496789">Raspberry Pi 5 + Touch + QR + Printer</text>
                <text x="12" y="63" font-size="11" fill="#496789">10.10.10.15</text>
              </g>

              <rect x="0" y="332" width="354" height="66" rx="10" fill="#dff0ff" stroke="#84a9cf" />
              <text x="12" y="357" font-size="14" fill="#1f446d" class="caps">Polling Switch (24-port, unmanaged in lab)</text>
              <text x="12" y="378" font-size="12" fill="#2b5c8e">Eth links from all 5 booth Pis + local ops Pi (10.10.10.30)</text>

              <line x1="84" y1="86" x2="84" y2="332" stroke="#2f6db3" stroke-width="2.4" />
              <line x1="268" y1="86" x2="268" y2="332" stroke="#2f6db3" stroke-width="2.4" />
              <line x1="84" y1="190" x2="84" y2="332" stroke="#2f6db3" stroke-width="2.4" />
              <line x1="268" y1="190" x2="268" y2="332" stroke="#2f6db3" stroke-width="2.4" />
              <line x1="176" y1="294" x2="176" y2="332" stroke="#2f6db3" stroke-width="2.4" />
            </g>

            <g transform="translate(640,94)">
              <rect x="0" y="0" width="238" height="94" rx="10" fill="#fff" stroke="#d8ba78" />
              <text x="14" y="30" font-size="14" fill="#6f5116" class="caps">Export Kiosk Pi</text>
              <text x="14" y="50" font-size="12" fill="#8a6722">Receives signed bundles from booth LAN</text>
              <text x="14" y="68" font-size="11" fill="#8a6722">No route back to booth Pis</text>

              <rect x="0" y="144" width="238" height="94" rx="10" fill="#fff" stroke="#d8ba78" />
              <text x="14" y="174" font-size="14" fill="#6f5116" class="caps">Import Scan Pi</text>
              <text x="14" y="194" font-size="12" fill="#8a6722">Verifies media hash + malware scan</text>
              <text x="14" y="212" font-size="11" fill="#8a6722">Forwards to airgap ingest only</text>

              <text x="52" y="287" font-size="12" fill="#6f5116" class="caps">One-way operational policy</text>
              <line x1="119" y1="95" x2="119" y2="141" stroke="#b9862c" stroke-width="4" marker-end="url(#arrowGold)" />
            </g>

            <g transform="translate(968,84)">
              <rect x="0" y="0" width="184" height="74" rx="9" fill="#fff" stroke="#9fd1b2" />
              <text x="12" y="27" font-size="13" fill="#246843" class="caps">Airgap Ingest Pi</text>
              <text x="12" y="47" font-size="11" fill="#246843">10.20.0.10</text>

              <rect x="198" y="0" width="184" height="74" rx="9" fill="#fff" stroke="#9fd1b2" />
              <text x="12" y="27" font-size="13" fill="#246843" class="caps">Airgap Relay Pi</text>
              <text x="12" y="47" font-size="11" fill="#246843">10.20.0.11</text>

              <rect x="396" y="0" width="184" height="74" rx="9" fill="#fff" stroke="#9fd1b2" />
              <text x="12" y="27" font-size="13" fill="#246843" class="caps">Observer Pi</text>
              <text x="12" y="47" font-size="11" fill="#246843">10.20.0.21</text>

              <rect x="0" y="110" width="580" height="70" rx="9" fill="#dcf5e5" stroke="#9fd1b2" />
              <text x="14" y="138" font-size="13" fill="#246843" class="caps">Airgap Ledger Pis: pi-ledger-a1 (10.20.0.31), pi-ledger-a2 (10.20.0.32), pi-ledger-a3 (10.20.0.33)</text>

              <line x1="92" y1="74" x2="92" y2="110" stroke="#2f6db3" stroke-width="2.2" marker-end="url(#arrowBlue)" />
              <line x1="290" y1="74" x2="290" y2="110" stroke="#2f6db3" stroke-width="2.2" marker-end="url(#arrowBlue)" />
            </g>

            <g transform="translate(968,456)">
              <rect x="0" y="0" width="184" height="74" rx="9" fill="#fff" stroke="#a8b8f0" />
              <text x="12" y="27" font-size="13" fill="#31449e" class="caps">Central Ingest</text>
              <text x="12" y="47" font-size="11" fill="#31449e">10.30.0.10</text>

              <rect x="198" y="0" width="184" height="74" rx="9" fill="#fff" stroke="#a8b8f0" />
              <text x="12" y="27" font-size="13" fill="#31449e" class="caps">Central Relay</text>
              <text x="12" y="47" font-size="11" fill="#31449e">10.30.0.11</text>

              <rect x="396" y="0" width="184" height="74" rx="9" fill="#fff" stroke="#a8b8f0" />
              <text x="12" y="27" font-size="13" fill="#31449e" class="caps">Oversight Monitor</text>
              <text x="12" y="47" font-size="11" fill="#31449e">10.30.0.21</text>

              <rect x="0" y="110" width="580" height="70" rx="9" fill="#e2e8ff" stroke="#a8b8f0" />
              <text x="14" y="138" font-size="13" fill="#31449e" class="caps">Central Ledger: central-1 (10.30.0.31), central-2 (10.30.0.32), central-3 (10.30.0.33)</text>

              <line x1="92" y1="74" x2="92" y2="110" stroke="#2f6db3" stroke-width="2.2" marker-end="url(#arrowBlue)" />
              <line x1="290" y1="74" x2="290" y2="110" stroke="#2f6db3" stroke-width="2.2" marker-end="url(#arrowBlue)" />
            </g>

            <line x1="402" y1="480" x2="640" y2="145" stroke="#2f6db3" stroke-width="4" marker-end="url(#arrowBlue)" />
            <text x="432" y="410" font-size="12" fill="#2f6db3" class="caps">Signed bundle export (json + sig)</text>

            <line x1="878" y1="238" x2="968" y2="122" stroke="#b9862c" stroke-width="4" marker-end="url(#arrowGold)" />
            <text x="814" y="196" font-size="12" fill="#8a6722" class="caps">One-way ingest</text>

            <line x1="1260" y1="268" x2="1068" y2="456" stroke="#2f6db3" stroke-width="3.2" marker-end="url(#arrowBlue)" stroke-dasharray="7 6" />
            <text x="1134" y="348" font-size="12" fill="#2f6db3" class="caps">Mirror for central verification</text>
          </svg>
          <div class="legend">
            <span><i class="dot" style="background:#2f6db3"></i>Network links</span>
            <span><i class="dot" style="background:#b9862c"></i>One-way transfer boundary</span>
            <span><i class="dot" style="background:#1b7a42"></i>Airgap-hosted Raspberry Pi services</span>
          </div>
        </article>

        <article class="panel panel-machine" data-panel="pi-machine-wiring">
          <p class="label">Booth Pi Wiring</p>
          <h2>Single Vote Machine Physical Harness</h2>
          <p>Exact attachment map for one polling booth Raspberry Pi.</p>
          <svg viewBox="0 0 1100 760" role="img" aria-label="Single booth Raspberry Pi wiring diagram">
            <defs>
              <marker id="arr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto">
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#2f6db3" />
              </marker>
            </defs>
            <rect x="375" y="230" width="350" height="250" rx="18" fill="#eaf3ff" stroke="#88aad0" stroke-width="2" />
            <text x="448" y="272" font-size="22" fill="#163f69" class="caps">Raspberry Pi 5 (8GB)</text>
            <text x="442" y="304" font-size="14" fill="#2f6db3">Vote machine runtime + signed image</text>
            <text x="442" y="328" font-size="13" fill="#2f6db3">hostname: booth-pi-01 | ip: 10.10.10.11</text>

            <rect x="62" y="72" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="78" y="105" font-size="15" fill="#0f243e" class="caps">10" Touch Display</text>
            <text x="78" y="128" font-size="12" fill="#496789">HDMI-0 + USB touch backchannel</text>

            <rect x="62" y="210" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="78" y="243" font-size="15" fill="#0f243e" class="caps">QR / Barcode Scanner</text>
            <text x="78" y="266" font-size="12" fill="#496789">USB-A port 1</text>

            <rect x="62" y="348" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="78" y="381" font-size="15" fill="#0f243e" class="caps">Thermal Receipt Printer</text>
            <text x="78" y="404" font-size="12" fill="#496789">USB-A port 2</text>

            <rect x="62" y="486" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="78" y="519" font-size="15" fill="#0f243e" class="caps">Poll Worker Key</text>
            <text x="78" y="542" font-size="12" fill="#496789">USB-A port 3 (unlock / override)</text>

            <rect x="812" y="112" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="826" y="145" font-size="15" fill="#0f243e" class="caps">UPS HAT</text>
            <text x="826" y="168" font-size="12" fill="#496789">I2C + power fail interrupt</text>

            <rect x="812" y="250" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="826" y="283" font-size="15" fill="#0f243e" class="caps">Tamper Switch</text>
            <text x="826" y="306" font-size="12" fill="#496789">GPIO17 event -> sealed log</text>

            <rect x="812" y="388" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="826" y="421" font-size="15" fill="#0f243e" class="caps">Booth LAN Switch</text>
            <text x="826" y="444" font-size="12" fill="#496789">Eth0 -> VLAN10 isolated segment</text>

            <rect x="812" y="526" width="230" height="88" rx="10" fill="#fff" stroke="#9fb7d4" />
            <text x="826" y="559" font-size="15" fill="#0f243e" class="caps">Security Seal Sensor</text>
            <text x="826" y="582" font-size="12" fill="#496789">GPIO27 cabinet open detection</text>

            <line x1="292" y1="116" x2="375" y2="255" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />
            <line x1="292" y1="254" x2="375" y2="298" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />
            <line x1="292" y1="392" x2="375" y2="340" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />
            <line x1="292" y1="530" x2="375" y2="384" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />

            <line x1="812" y1="156" x2="725" y2="264" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />
            <line x1="812" y1="294" x2="725" y2="314" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />
            <line x1="812" y1="432" x2="725" y2="364" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />
            <line x1="812" y1="570" x2="725" y2="414" stroke="#2f6db3" stroke-width="3" marker-end="url(#arr)" />

            <text x="454" y="712" font-size="13" fill="#496789" class="caps">All cables are fixed-length and sealed at setup. Session close triggers secure wipe before next voter.</text>
          </svg>
          <div class="legend">
            <span><i class="dot" style="background:#2f6db3"></i>Physical cable attachment</span>
            <span><i class="dot" style="background:#1b7a42"></i>Required for session control + evidence capture</span>
          </div>
        </article>

        <article class="panel panel-network" data-panel="pi-network-segmentation">
          <p class="label">Network Segmentation</p>
          <h2>VLAN, Firewall, And Allow Rules</h2>
          <p>Exact network boundaries that keep booth Pis isolated while preserving audit flow.</p>
          <svg viewBox="0 0 1100 760" role="img" aria-label="VoteChain VLAN and firewall topology">
            <defs>
              <marker id="arrowNet" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto">
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#2f6db3" />
              </marker>
            </defs>

            <rect x="28" y="40" width="1042" height="144" rx="10" fill="#e9f3ff" stroke="#aac3df" />
            <text x="48" y="73" font-size="15" fill="#1f446d" class="caps">VLAN10 Booth LAN | 10.10.10.0/24</text>
            <text x="48" y="98" font-size="12" fill="#365b84">booth-pi-01..05 + ops-pi. outbound internet blocked at gateway.</text>
            <rect x="48" y="112" width="185" height="54" rx="8" fill="#fff" stroke="#9fb7d4" />
            <text x="62" y="143" font-size="12" fill="#0f243e">Switch-A (booth)</text>
            <rect x="250" y="112" width="185" height="54" rx="8" fill="#fff" stroke="#9fb7d4" />
            <text x="264" y="143" font-size="12" fill="#0f243e">Firewall A (deny any/any)</text>

            <rect x="28" y="220" width="1042" height="144" rx="10" fill="#ecf8ef" stroke="#a7d6b7" />
            <text x="48" y="253" font-size="15" fill="#246843" class="caps">VLAN20 Airgap Core | 10.20.0.0/24</text>
            <text x="48" y="278" font-size="12" fill="#2f6f4d">ingest-pi, relay-pi, ledger-a1/a2/a3, observer-pi.</text>
            <rect x="48" y="292" width="185" height="54" rx="8" fill="#fff" stroke="#9fd1b2" />
            <text x="62" y="323" font-size="12" fill="#246843">Switch-B (airgap)</text>
            <rect x="250" y="292" width="185" height="54" rx="8" fill="#fff" stroke="#9fd1b2" />
            <text x="264" y="323" font-size="12" fill="#246843">ACL: allow only ingest:443</text>

            <rect x="28" y="400" width="1042" height="144" rx="10" fill="#eef0ff" stroke="#b4c0f5" />
            <text x="48" y="433" font-size="15" fill="#31449e" class="caps">VLAN30 Central Verify | 10.30.0.0/24</text>
            <text x="48" y="458" font-size="12" fill="#485ab2">central ingest, central relay, central-ledger-1..3, oversight monitor.</text>
            <rect x="48" y="472" width="185" height="54" rx="8" fill="#fff" stroke="#a8b8f0" />
            <text x="62" y="503" font-size="12" fill="#31449e">Switch-C (central)</text>
            <rect x="250" y="472" width="185" height="54" rx="8" fill="#fff" stroke="#a8b8f0" />
            <text x="264" y="503" font-size="12" fill="#31449e">mTLS + key pin enforcement</text>

            <rect x="28" y="580" width="1042" height="144" rx="10" fill="#fff4df" stroke="#dbc290" />
            <text x="48" y="613" font-size="15" fill="#6f5116" class="caps">Transfer / DMZ Segment</text>
            <text x="48" y="638" font-size="12" fill="#8a6722">Export kiosk Pi + import scan Pi. Operationally one-way with signed media transfer.</text>
            <rect x="48" y="652" width="220" height="52" rx="8" fill="#fff" stroke="#d8ba78" />
            <text x="62" y="682" font-size="12" fill="#6f5116">Export Pi (10.40.0.10)</text>
            <rect x="286" y="652" width="220" height="52" rx="8" fill="#fff" stroke="#d8ba78" />
            <text x="300" y="682" font-size="12" fill="#6f5116">Import Pi (10.40.0.11)</text>

            <line x1="446" y1="139" x2="670" y2="318" stroke="#2f6db3" stroke-width="3" marker-end="url(#arrowNet)" />
            <text x="506" y="213" font-size="11" fill="#2f6db3" class="caps">allow tcp/443 to airgap-ingest</text>

            <line x1="446" y1="319" x2="670" y2="499" stroke="#2f6db3" stroke-width="3" marker-end="url(#arrowNet)" stroke-dasharray="7 5" />
            <text x="516" y="393" font-size="11" fill="#2f6db3" class="caps">relay mirror path (signed bundles)</text>

            <line x1="530" y1="678" x2="868" y2="678" stroke="#b9862c" stroke-width="4" marker-end="url(#arrowNet)" />
            <text x="586" y="666" font-size="11" fill="#8a6722" class="caps">one-way handling policy</text>

            <text x="778" y="144" font-size="13" fill="#b63a3a" class="caps">Internet: blocked from VLAN10/VLAN20</text>
            <line x1="754" y1="152" x2="1044" y2="152" stroke="#b63a3a" stroke-width="3" />
            <line x1="754" y1="132" x2="1044" y2="172" stroke="#b63a3a" stroke-width="3" />
          </svg>
          <div class="note">Attack simulation anchor: unauthorized relay node joining VLAN20 should fail role validation and emit observer degradation alert within one monitoring interval.</div>
        </article>

        <article class="panel panel-compose" data-panel="pi-compose-placement">
          <p class="label">Compose Placement</p>
          <h2>Container Services Mapped To Hosts</h2>
          <p>Which service runs on which Pi/host in the testing layout.</p>
          <svg viewBox="0 0 1240 760" role="img" aria-label="Compose service placement on Raspberry Pi hosts">
            <rect x="26" y="28" width="360" height="704" rx="11" fill="#e9f3ff" stroke="#aac3df" />
            <text x="44" y="58" font-size="14" fill="#1f446d" class="caps">Polling Place Pis</text>

            <rect x="420" y="28" width="394" height="704" rx="11" fill="#ecf8ef" stroke="#a7d6b7" />
            <text x="440" y="58" font-size="14" fill="#246843" class="caps">Airgap Pi Cluster</text>

            <rect x="848" y="28" width="366" height="704" rx="11" fill="#eef0ff" stroke="#b4c0f5" />
            <text x="868" y="58" font-size="14" fill="#31449e" class="caps">Central Hosts</text>

            <g transform="translate(44,86)">
              <rect x="0" y="0" width="324" height="86" rx="9" fill="#fff" stroke="#9fb7d4" />
              <text x="12" y="28" font-size="12" fill="#0f243e" class="caps">booth-pi-[1..5]</text>
              <text x="12" y="48" font-size="12" fill="#496789">machine-api | session-store (postgres, local)</text>
              <text x="12" y="67" font-size="11" fill="#496789">ports: 8080 internal only | host access blocked in strict mode</text>

              <rect x="0" y="104" width="324" height="86" rx="9" fill="#fff" stroke="#9fb7d4" />
              <text x="12" y="132" font-size="12" fill="#0f243e" class="caps">ops-pi</text>
              <text x="12" y="152" font-size="12" fill="#496789">machine-health | log-shipper | reset-check monitor</text>
              <text x="12" y="171" font-size="11" fill="#496789">collects sealed session-close events from all booth Pis</text>
            </g>

            <g transform="translate(440,86)">
              <rect x="0" y="0" width="354" height="86" rx="9" fill="#fff" stroke="#9fd1b2" />
              <text x="12" y="28" font-size="12" fill="#246843" class="caps">airgap-ingest-pi</text>
              <text x="12" y="48" font-size="12" fill="#2f6f4d">ingest-api | bundle-validator</text>
              <text x="12" y="67" font-size="11" fill="#2f6f4d">rejects unsigned / malformed bundles before ledger write</text>

              <rect x="0" y="104" width="354" height="86" rx="9" fill="#fff" stroke="#9fd1b2" />
              <text x="12" y="132" font-size="12" fill="#246843" class="caps">airgap-relay-pi</text>
              <text x="12" y="152" font-size="12" fill="#2f6f4d">relay-airgap | outbox-writer</text>
              <text x="12" y="171" font-size="11" fill="#2f6f4d">ACK key pinning + role allow-list enforcement</text>

              <rect x="0" y="208" width="354" height="96" rx="9" fill="#fff" stroke="#9fd1b2" />
              <text x="12" y="236" font-size="12" fill="#246843" class="caps">airgap-ledger-a1 / a2 / a3</text>
              <text x="12" y="256" font-size="12" fill="#2f6f4d">ledger-node</text>
              <text x="12" y="275" font-size="11" fill="#2f6f4d">append-only replicated log, head hash convergence required</text>

              <rect x="0" y="322" width="354" height="86" rx="9" fill="#fff" stroke="#9fd1b2" />
              <text x="12" y="350" font-size="12" fill="#246843" class="caps">observer-pi</text>
              <text x="12" y="370" font-size="12" fill="#2f6f4d">monitor | non-equivocation checks</text>
              <text x="12" y="389" font-size="11" fill="#2f6f4d">alerts on ACK mismatch, pending outbox, role violations</text>
            </g>

            <g transform="translate(868,86)">
              <rect x="0" y="0" width="326" height="86" rx="9" fill="#fff" stroke="#a8b8f0" />
              <text x="12" y="28" font-size="12" fill="#31449e" class="caps">central-ingest</text>
              <text x="12" y="48" font-size="12" fill="#485ab2">ingest-api-central</text>
              <text x="12" y="67" font-size="11" fill="#485ab2">independent acceptance path for cross-plane verification</text>

              <rect x="0" y="104" width="326" height="86" rx="9" fill="#fff" stroke="#a8b8f0" />
              <text x="12" y="132" font-size="12" fill="#31449e" class="caps">central-relay</text>
              <text x="12" y="152" font-size="12" fill="#485ab2">relay-central | outbox-reconciler</text>
              <text x="12" y="171" font-size="11" fill="#485ab2">mTLS + pinned keys + quorum ACK checks</text>

              <rect x="0" y="208" width="326" height="96" rx="9" fill="#fff" stroke="#a8b8f0" />
              <text x="12" y="236" font-size="12" fill="#31449e" class="caps">central-ledger-1 / 2 / 3</text>
              <text x="12" y="256" font-size="12" fill="#485ab2">ledger-node-central</text>
              <text x="12" y="275" font-size="11" fill="#485ab2">independent chain head compared against airgap run summary</text>

              <rect x="0" y="322" width="326" height="86" rx="9" fill="#fff" stroke="#a8b8f0" />
              <text x="12" y="350" font-size="12" fill="#31449e" class="caps">audit verifier</text>
              <text x="12" y="370" font-size="12" fill="#485ab2">votechain-audit-verify</text>
              <text x="12" y="389" font-size="11" fill="#485ab2">cast count == receipts + ledger convergence check</text>
            </g>

            <line x1="368" y1="148" x2="420" y2="128" stroke="#2f6db3" stroke-width="3" />
            <line x1="794" y1="148" x2="848" y2="128" stroke="#2f6db3" stroke-width="3" stroke-dasharray="7 6" />
            <text x="500" y="102" font-size="11" fill="#2f6db3" class="caps">signed bundle flow</text>

            <text x="44" y="700" font-size="12" fill="#496789" class="caps">Strict profile: internal Docker networks only, no exposed app ports.</text>
          </svg>
          <div class="legend">
            <span><i class="dot" style="background:#1b7a42"></i>Airgap runtime on Raspberry Pi hosts</span>
            <span><i class="dot" style="background:#31449e"></i>Central independent verification lane</span>
          </div>
        </article>

        <article class="panel panel-cycle" data-panel="pi-test-cycle">
          <p class="label">Execution Flow</p>
          <h2>Per-Voter Session + Reset Cycle</h2>
          <p>How one session moves through booth Pi, transfer, ingest, and verification.</p>
          <svg viewBox="0 0 1000 760" role="img" aria-label="Session flow sequence diagram">
            <rect x="24" y="24" width="952" height="712" rx="10" fill="#f7fbff" stroke="#cddbed" />

            <text x="56" y="70" font-size="12" fill="#496789" class="caps">Voter</text>
            <text x="224" y="70" font-size="12" fill="#496789" class="caps">Booth Pi</text>
            <text x="396" y="70" font-size="12" fill="#496789" class="caps">Transfer Pi</text>
            <text x="576" y="70" font-size="12" fill="#496789" class="caps">Airgap Ingest</text>
            <text x="756" y="70" font-size="12" fill="#496789" class="caps">Central Verify</text>

            <line x1="70" y1="90" x2="70" y2="708" stroke="#9fb7d4" stroke-width="2" stroke-dasharray="5 6" />
            <line x1="250" y1="90" x2="250" y2="708" stroke="#9fb7d4" stroke-width="2" stroke-dasharray="5 6" />
            <line x1="430" y1="90" x2="430" y2="708" stroke="#9fb7d4" stroke-width="2" stroke-dasharray="5 6" />
            <line x1="610" y1="90" x2="610" y2="708" stroke="#9fb7d4" stroke-width="2" stroke-dasharray="5 6" />
            <line x1="790" y1="90" x2="790" y2="708" stroke="#9fb7d4" stroke-width="2" stroke-dasharray="5 6" />

            <g fill="#fff" stroke="#b7c8dc">
              <rect x="212" y="108" width="76" height="50" rx="8" />
              <rect x="212" y="174" width="76" height="50" rx="8" />
              <rect x="212" y="240" width="76" height="50" rx="8" />
              <rect x="212" y="306" width="76" height="50" rx="8" />
              <rect x="212" y="372" width="76" height="50" rx="8" />
              <rect x="212" y="438" width="76" height="50" rx="8" />
            </g>

            <g stroke="#2f6db3" stroke-width="2.4" fill="none" marker-end="url(#arrowSeq)">
              <defs>
                <marker id="arrowSeq" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto">
                  <path d="M 0 0 L 10 5 L 0 10 z" fill="#2f6db3" />
                </marker>
              </defs>
              <line x1="78" y1="128" x2="212" y2="128" />
              <line x1="78" y1="194" x2="212" y2="194" />
              <line x1="288" y1="260" x2="422" y2="260" />
              <line x1="438" y1="326" x2="602" y2="326" />
              <line x1="618" y1="392" x2="782" y2="392" stroke-dasharray="7 5" />
              <line x1="782" y1="458" x2="288" y2="458" />
              <line x1="288" y1="524" x2="78" y2="524" />
            </g>

            <text x="88" y="120" font-size="11" fill="#2f6db3">1. Credential present</text>
            <text x="88" y="186" font-size="11" fill="#2f6db3">2. Cast/Challenge + receipt</text>
            <text x="292" y="252" font-size="11" fill="#2f6db3">3. Export signed bundle</text>
            <text x="442" y="318" font-size="11" fill="#2f6db3">4. Ingest validates signature</text>
            <text x="624" y="384" font-size="11" fill="#2f6db3">5. Mirror for central reconcile</text>
            <text x="420" y="450" font-size="11" fill="#2f6db3">6. Audit response (ok/fail)</text>
            <text x="96" y="516" font-size="11" fill="#2f6db3">7. Session close + secure reset</text>

            <rect x="38" y="576" width="924" height="132" rx="8" fill="#eef7ff" stroke="#b7c8dc" />
            <text x="56" y="606" font-size="12" fill="#1f446d" class="caps">Automated loop used in tests</text>
            <text x="56" y="630" font-size="12" fill="#365b84">run-mock-election-cycle --machines 5 --sessions-per-machine 100 --spoil-rate 0.12</text>
            <text x="56" y="652" font-size="12" fill="#365b84">After each session: verify residual_ballot_cache=0, residual_credentials=0, residual_receipt_cache=0</text>
            <text x="56" y="674" font-size="12" fill="#365b84">Adversarial inserts: duplicate vote attempts, rogue ACK key, unauthorized node role injection</text>
          </svg>
          <div class="legend">
            <span><i class="dot" style="background:#2f6db3"></i>Normal session path</span>
            <span><i class="dot" style="background:#b9862c"></i>Policy-controlled transfer boundary</span>
          </div>
        </article>
      </section>
          </div>
        </div>
      </article>
  </div>

  <style>

      .board-canvas {
        --ink: #0f243e;
        --ink-soft: #496789;
        --line: #c0cfdf;
        --panel: #ffffff;
        --bg-a: #edf3fb;
        --bg-b: #dbe6f3;
        --accent: #b9862c;
        --accent-soft: #f8ecd3;
        --good: #1b7a42;
        --warn: #9b6115;
        --red: #b63a3a;
        --mono: "JetBrains Mono", Menlo, Consolas, monospace;
        --serif: "Libre Caslon Text", "Palatino Linotype", serif;
        --sans: "Avenir Next", "Segoe UI", Tahoma, sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      .board-canvas {
        margin: 0;
        color: var(--ink);
        background:
          radial-gradient(circle at 8% 12%, rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0) 52%),
          linear-gradient(140deg, var(--bg-a), var(--bg-b));
        font-family: var(--sans);
      }

      .page {
        width: min(1640px, calc(100% - 20px));
        max-width: 1640px;
        margin: 24px auto 60px;
      }

      .hero {
        border: 1px solid var(--line);
        border-radius: 14px;
        padding: 18px 22px;
        background: linear-gradient(145deg, #fff, #eef4fc);
        box-shadow: 0 14px 30px rgba(26, 42, 61, 0.08);
      }

      .kicker {
        margin: 0 0 7px;
        font-family: var(--mono);
        font-size: 11px;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        color: var(--ink-soft);
      }

      .hero h1 {
        margin: 0;
        font-size: 38px;
        line-height: 1.1;
        font-family: var(--serif);
      }

      .hero p {
        margin: 8px 0 0;
        color: var(--ink-soft);
        font-size: 15px;
      }

      .metrics {
        margin-top: 14px;
        display: grid;
        grid-template-columns: repeat(7, minmax(0, 1fr));
        gap: 8px;
      }

      .metric {
        border: 1px solid var(--line);
        border-radius: 9px;
        padding: 8px 10px;
        background: #fff;
      }

      .metric span {
        display: block;
        font-family: var(--mono);
        font-size: 10px;
        text-transform: uppercase;
        color: var(--ink-soft);
      }

      .metric strong {
        display: block;
        margin-top: 3px;
        font-size: 18px;
        font-family: var(--serif);
      }

      .grid {
        margin-top: 12px;
        display: grid;
        grid-template-columns: repeat(12, minmax(0, 1fr));
        gap: 10px;
      }

      .panel {
        border: 1px solid var(--line);
        border-radius: 14px;
        background: var(--panel);
        padding: 12px;
        box-shadow: 0 8px 18px rgba(26, 42, 61, 0.06);
      }

      .panel .label {
        margin: 0 0 4px;
        font-family: var(--mono);
        font-size: 10px;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        color: var(--ink-soft);
      }

      .panel h2 {
        margin: 0;
        font-size: 21px;
        font-family: var(--serif);
      }

      .panel p {
        margin: 4px 0 8px;
        color: var(--ink-soft);
        font-size: 13px;
      }

      .panel-topology {
        grid-column: span 12;
      }

      .panel-machine {
        grid-column: span 6;
      }

      .panel-network {
        grid-column: span 6;
      }

      .panel-compose {
        grid-column: span 7;
      }

      .panel-cycle {
        grid-column: span 5;
      }

      svg {
        width: 100%;
        height: auto;
        display: block;
        border: 1px solid #d2deec;
        border-radius: 10px;
        background: #f9fcff;
      }

      .legend {
        margin-top: 7px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        font-family: var(--mono);
        font-size: 10px;
        color: var(--ink-soft);
      }

      .legend span {
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }

      .dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        display: inline-block;
      }

      .note {
        margin-top: 6px;
        border: 1px dashed #cfdaea;
        border-radius: 8px;
        background: #f4f9ff;
        padding: 8px 10px;
        font-family: var(--mono);
        font-size: 10px;
        color: var(--ink-soft);
      }

      .caps {
        text-transform: uppercase;
        letter-spacing: 0.06em;
        font-family: var(--mono);
      }
    
  </style>
</BaseLayout>
